# Приветствую. Спасибо за приглашение!

## Описание работы системы
В рамках выполнения тестового задания я решил сгенерировать проект из своего [шаблона](https://github.com/idmaksim/nestjs-base-template)

В системе есть возможность авторизации под тестовыми учетными данными
 - Логин (почта): `string@gmail.com`
 - Пароль: `string`

После отправки этих данных по пути `/api/auth/sign-in`, Вы получите access и refresh JWT-токены.

В системе предусмотрена возможность поиска товаров, по которым можно будет выполнять транзакции (в рамках этого задания - только покупка)

Чтобы купить товар, необходимо найти нужный товар; отправить свой JWT access токен, id товара и количество на метод покупки товара (`/api/products/buy`)

В момент покупки будут совершены проверки на существование товара и пользователя в системе, проверен баланс пользователя и возможность приобрести данный товар. Далее будет создана запись в таблице `transactions` и, в случае успеха всех действий, возвращен ответ.

Пользователь также может выполнить поиск по своим транзакциям в методе `/api/transactions/my`, передав токен

Благодаря шаблону, в этом проекте также есть:
- загрузка медиа-файлов для аваторов пользователя
- система разграничения прав доступа по ролям пользователей
- разделение приложения на главную часть (в `/apps/main`) и админскую (`apps/admin`)
- конфигурация для локальной развертки со всем необходимым (S3-совместимое хранилище, БД Postgres, главное и админское приложения)
- базовая схема БД (таблицы users, permissions, roles, sessions, medias)
- файл с нагрузочным тестированием на вход в приложение
- файл конфигурации CI CD пайплайна


## Как запустить
Клонируем репо:
 ```bash
 git clone https://github.com/idmaksim/user-balance-ledger-api.git
 cd user-balance-ledger-api
 ```
Убеждаемся, что на ПК есть docker
...

Не имеем локально запущенных контейнеров, которые могут конфликтовать с моими: S3 Minio, Postgres
...

Выполняем сборку проекта со всеми зависимостями
(набираемся терпения, процесс в первый раз будет небыстрым)
```bash
docker compose up --build
```

Переходим на http://localhost:3000/api для получения swagger документации главного приложения
На http://localhost:3001/api - для админского.

